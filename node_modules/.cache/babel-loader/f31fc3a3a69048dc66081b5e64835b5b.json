{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/shuowang/ETM/Leekdao/leekdao-farm/src/views/Voting/components/ProposalRow.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { ArrowForwardIcon, Box, IconButton, Flex, Text, Heading } from 'leek-uikit';\nimport { useQuery } from \"@apollo/client\";\nimport LOAD_PROPOSALS from \"config/graphql/query\";\nimport styled from 'styled-components';\nimport { LEEKDAO_SPACE } from \"config/constants/voting\";\nimport { isCoreProposal, filterProposalsByType } from '../helper';\nimport { ProposalStateTag, ProposalTypeTag } from './tags';\nimport ProposalsLoading from './ProposalsLoading';\nimport TimeFrame from './TimeFrame';\nconst StyledProposalRow = styled.div`\n  align-items: center;\n  border-bottom: 1px solid ${({\n  theme\n}) => theme.colors.borderColor};\n  display: flex;\n  padding: 16px 24px;\n\n  &:hover {\n    background-color:#f7f7f7;\n    cursor:pointer;\n  }\n`;\n_c = StyledProposalRow;\n\nconst newPage = url => {\n  const w = window.open('about:blank');\n  w.location.href = url;\n};\n\nconst ProposalRow = ({\n  state,\n  type\n}) => {\n  _s();\n\n  const votingLink = `https://vote.leekdao.xyz/#/${LEEKDAO_SPACE}/proposal/`;\n  const {\n    data\n  } = useQuery(LOAD_PROPOSALS, {\n    variables: {\n      state\n    }\n  });\n  const [proposals, setProposals] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  useEffect(() => {\n    setLoading(true);\n\n    if (data) {\n      setProposals(data.proposals);\n      setLoading(false);\n    }\n  }, [data]);\n  let comp;\n\n  if (isLoading) {\n    comp = /*#__PURE__*/_jsxDEV(ProposalsLoading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 16\n    }, this);\n  } else if (filterProposalsByType(proposals, type).length > 0) {\n    comp = filterProposalsByType(proposals, type).map(item => /*#__PURE__*/_jsxDEV(StyledProposalRow, {\n      onClick: () => newPage(votingLink + item.id),\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        as: \"span\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          bold: true,\n          mb: \"8px\",\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"center\",\n          mb: \"8px\",\n          children: /*#__PURE__*/_jsxDEV(TimeFrame, {\n            startDate: item.start,\n            endDate: item.end,\n            proposalState: item.state\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(ProposalStateTag, {\n            proposalState: item.state\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: \"8px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(ProposalTypeTag, {\n              isCoreProposal: isCoreProposal(item.author)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        variant: \"text\",\n        children: /*#__PURE__*/_jsxDEV(ArrowForwardIcon, {\n          width: \"24px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, item.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this));\n  } else {\n    comp = /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      p: \"32px\",\n      children: /*#__PURE__*/_jsxDEV(Heading, {\n        as: \"h5\",\n        children: \"No proposals found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: comp\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProposalRow, \"knum2hTyYCk/aMlqSWdgH81U5/k=\", false, function () {\n  return [useQuery];\n});\n\n_c2 = ProposalRow;\nexport default ProposalRow;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"StyledProposalRow\");\n$RefreshReg$(_c2, \"ProposalRow\");","map":{"version":3,"sources":["/Users/shuowang/ETM/Leekdao/leekdao-farm/src/views/Voting/components/ProposalRow.tsx"],"names":["React","useState","useEffect","ArrowForwardIcon","Box","IconButton","Flex","Text","Heading","useQuery","LOAD_PROPOSALS","styled","LEEKDAO_SPACE","isCoreProposal","filterProposalsByType","ProposalStateTag","ProposalTypeTag","ProposalsLoading","TimeFrame","StyledProposalRow","div","theme","colors","borderColor","newPage","url","w","window","open","location","href","ProposalRow","state","type","votingLink","data","variables","proposals","setProposals","isLoading","setLoading","comp","length","map","item","id","flex","title","start","end","marginLeft","author"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { ArrowForwardIcon, Box, IconButton, Flex, Text, Heading } from 'leek-uikit'\nimport { useQuery } from \"@apollo/client\";\nimport LOAD_PROPOSALS from \"config/graphql/query\";\nimport styled from 'styled-components'\nimport { ProposalType } from 'state/types'\nimport { LEEKDAO_SPACE } from \"config/constants/voting\"\nimport { isCoreProposal, filterProposalsByType } from '../helper';\nimport { ProposalStateTag, ProposalTypeTag } from './tags'\nimport ProposalsLoading from './ProposalsLoading';\nimport TimeFrame from './TimeFrame';\n\ninterface StateProps {\n    state: string,\n    type: ProposalType\n}\n\nconst StyledProposalRow = styled.div`\n  align-items: center;\n  border-bottom: 1px solid ${({ theme }) => theme.colors.borderColor};\n  display: flex;\n  padding: 16px 24px;\n\n  &:hover {\n    background-color:#f7f7f7;\n    cursor:pointer;\n  }\n`\n\nconst newPage = (url) => {\n    const w = window.open('about:blank');\n    w.location.href = url;\n}\n\n\nconst ProposalRow: React.FC<StateProps> = ({ state, type }) => {\n    const votingLink = `https://vote.leekdao.xyz/#/${LEEKDAO_SPACE}/proposal/`\n    const { data } = useQuery(LOAD_PROPOSALS, {\n        variables: {\n            state\n        }\n    });\n    const [proposals, setProposals] = useState([]);\n    const [isLoading, setLoading] = useState(false)\n\n    useEffect(() => {\n        setLoading(true);\n        if (data) {\n            setProposals(data.proposals)\n            setLoading(false);\n        }\n    }, [data]);\n\n    let comp;\n    if (isLoading) {\n        comp = <ProposalsLoading />\n    } else if (filterProposalsByType(proposals, type).length > 0) {\n        comp = filterProposalsByType(proposals, type).map((item) => (\n            <StyledProposalRow onClick={() => newPage(votingLink + item.id)} key={item.id}>\n                <Box as=\"span\" style={{ flex: 1 }}>\n                    <Text bold mb=\"8px\">{item.title}</Text>\n                    <Flex alignItems=\"center\" mb=\"8px\">\n                        <TimeFrame startDate={item.start} endDate={item.end} proposalState={item.state} />\n                    </Flex>\n                    <Flex alignItems=\"center\">\n                        <ProposalStateTag proposalState={item.state} />\n                        <span style={{ marginLeft: \"8px\" }}>\n                            <ProposalTypeTag isCoreProposal={isCoreProposal(item.author)} />\n                        </span>\n                    </Flex>\n                </Box>\n                <IconButton variant=\"text\">\n                    <ArrowForwardIcon width=\"24px\" />\n                </IconButton>\n            </StyledProposalRow>\n        ))\n    } else {\n        comp = <Flex alignItems=\"center\" justifyContent=\"center\" p=\"32px\">\n            <Heading as=\"h5\">No proposals found</Heading>\n        </Flex>\n    }\n\n    return (\n        <div>{comp}</div>\n    )\n}\n\nexport default ProposalRow"]},"metadata":{},"sourceType":"module"}