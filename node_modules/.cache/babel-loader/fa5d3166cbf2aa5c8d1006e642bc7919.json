{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/shuowang/ETM/Leekdao/leekdao-farm/src/views/Airdrop/AirdropCard/InfoCard.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport BigNumber from \"bignumber.js\";\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport { Card, CardHeader, Heading, Flex, Button, useModal, Text, LinkExternal, Box } from 'leek-uikit';\nimport { getChainExplorerUrl } from \"utils/chainExplorer\";\nimport UnlockButton from \"components/UnlockButton\";\nimport { useAirdropContract } from \"hooks/useContract\";\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport { airdropConfig } from \"config/constants\";\nimport registerToken from \"utils/wallet\";\nimport AirdropInfoHeader from \"../General/AirdropInfoHeader\";\nimport AirdropInfoDetails from \"../General/AirdropInfoDetails\";\nimport AirdropProgress from \"../General/AirdropProgress\";\nimport ConfirmationPendingContent from \"../Modal/ConfirmationPendingModal\";\nimport AirdropApproveTransactionModal from \"../Modal/AirdropApproveTransactionModal\";\nimport ApproveErrorMessageModal from \"../Modal/ApproveErrorMessageModal\";\nimport VipApproveErrorMessageModal from \"../Modal/VipApproveErrorMessageModal\";\nimport VipAirdropApproveTransactionModal from \"../Modal/VipAirdropApproveTransactionModal\";\nimport ClaimAirdropTransactionModal from \"../Modal/ClaimAirdropTransactionModal\";\nimport { airdropApproveStore, vipAirdropApproveStore, claimAirdropStore } from \"../store/store\";\nimport { APPROVE_AIRDROP, APPROVE_VIP_AIRDROP, CLAIM_AIRDROP, UPDATE_ERROR_MESSAGE, RESET_TO_DEFAULT_STATE } from \"../store/reducer\";\nimport { useGetAirdropInfo, useGetAirdropList, updateAirdropParticipationStatus, useIsVIP, useIsWhiteListed } from \"../api\";\nconst CHAIN_ID = process.env.REACT_APP_CHAIN_ID;\nconst CONTRACT_OWNER = process.env.REACT_APP_LOTTERY_OWNER;\nconst InfoLayout = styled.div`\n    padding:30px;\n\n    @media (max-width: 768px) {\n        padding:20px\n    }\n`;\n_c = InfoLayout;\nconst StyledInfoCard = styled(Card)`\n  background-repeat: no-repeat;\n  background-size: contain;\n  max-height: ${({\n  isOwner\n}) => isOwner ? '580px' : '510px'}}\n  width: 100%;\n`;\n_c2 = StyledInfoCard;\n\nconst InfoCard = () => {\n  _s();\n\n  const {\n    id,\n    name,\n    description,\n    tokenAddress,\n    tokenDecimals,\n    projectSiteUrl,\n    totalAmount,\n    isActive\n  } = airdropConfig;\n  const {\n    account\n  } = useWallet();\n  const address = tokenAddress[CHAIN_ID];\n  const isOwner = CONTRACT_OWNER === account;\n  const {\n    startBlock,\n    endBlock,\n    airdropAmount,\n    vipAirdropAmount,\n    remainingAmount\n  } = useGetAirdropInfo();\n  const airdropNumber = getBalanceNumber(new BigNumber(airdropAmount));\n  const airdropVipNumber = getBalanceNumber(new BigNumber(vipAirdropAmount));\n  const remainingTokens = getBalanceNumber(new BigNumber(remainingAmount));\n  const progress = isActive ? (totalAmount - remainingTokens) / totalAmount * 100 : 0;\n  const airdropList = useGetAirdropList(false);\n  const vipAirdropList = useGetAirdropList(true);\n  const contract = useAirdropContract();\n  const isVIP = useIsVIP(account);\n  const isWhitelisted = useIsWhiteListed(account);\n  const [onPresentConfirmationModal] = useModal( /*#__PURE__*/_jsxDEV(ConfirmationPendingContent, {\n    onDismiss: () => {\n      return null;\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 51\n  }, this));\n  const [onPresentAirdropApproveModal] = useModal( /*#__PURE__*/_jsxDEV(AirdropApproveTransactionModal, {\n    onDismiss: () => {\n      return null;\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 53\n  }, this));\n  const [onPresentAirdropApproveErrorModal] = useModal( /*#__PURE__*/_jsxDEV(ApproveErrorMessageModal, {\n    onDismiss: () => {\n      return null;\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 58\n  }, this));\n  const [onPresentVipAirdropApproveModal] = useModal( /*#__PURE__*/_jsxDEV(VipAirdropApproveTransactionModal, {\n    onDismiss: () => {\n      return null;\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 56\n  }, this));\n  const [onPresentVipAirdropApproveErrorModal] = useModal( /*#__PURE__*/_jsxDEV(VipApproveErrorMessageModal, {\n    onDismiss: () => {\n      return null;\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 61\n  }, this));\n  const [onPresentClaimAirdropModal] = useModal( /*#__PURE__*/_jsxDEV(ClaimAirdropTransactionModal, {\n    onDismiss: () => {\n      return null;\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 51\n  }, this));\n\n  const approveAirdropList = async () => {\n    onPresentConfirmationModal();\n    airdropApproveStore.dispatch({\n      type: RESET_TO_DEFAULT_STATE\n    });\n\n    if (airdropList.error) {\n      const action = {\n        type: UPDATE_ERROR_MESSAGE,\n        airdropApproveError: airdropList.error\n      };\n      airdropApproveStore.dispatch(action);\n      onPresentAirdropApproveErrorModal();\n    } else {\n      const result = await contract.methods.whitelist(airdropList).send({\n        from: account\n      });\n      const action = {\n        type: APPROVE_AIRDROP,\n        airdropApproveTxHash: result.transactionHash\n      };\n      airdropApproveStore.dispatch(action);\n      onPresentAirdropApproveModal();\n      await updateAirdropParticipationStatus(false);\n    }\n  };\n\n  const vipApproveAirdropList = async () => {\n    onPresentConfirmationModal();\n    vipAirdropApproveStore.dispatch({\n      type: RESET_TO_DEFAULT_STATE\n    });\n\n    if (vipAirdropList.error) {\n      const action = {\n        type: UPDATE_ERROR_MESSAGE,\n        vipAirdropApproveError: vipAirdropList.error\n      };\n      vipAirdropApproveStore.dispatch(action);\n      onPresentVipAirdropApproveErrorModal();\n    } else {\n      const result = await contract.methods.whitelistVIP(vipAirdropList).send({\n        from: account\n      });\n      const action = {\n        type: APPROVE_VIP_AIRDROP,\n        vipAirdropApproveTxHash: result.transactionHash\n      };\n      vipAirdropApproveStore.dispatch(action);\n      onPresentVipAirdropApproveModal();\n      await updateAirdropParticipationStatus(true);\n    }\n  };\n\n  const claimAirdrop = async () => {\n    onPresentConfirmationModal();\n    claimAirdropStore.dispatch({\n      type: RESET_TO_DEFAULT_STATE\n    });\n\n    if (isWhitelisted || isVIP) {\n      const result = await contract.methods.getAirdrop().send({\n        from: account\n      });\n      const action = {\n        type: CLAIM_AIRDROP,\n        claimAirdropTxHash: result.transactionHash\n      };\n      claimAirdropStore.dispatch(action);\n      onPresentClaimAirdropModal();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(StyledInfoCard, {\n    isOwner: isOwner,\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      children: /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        children: /*#__PURE__*/_jsxDEV(Heading, {\n          children: \"AirDrop Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(InfoLayout, {\n      children: [/*#__PURE__*/_jsxDEV(AirdropInfoHeader, {\n        airdropId: id,\n        name: name,\n        description: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AirdropProgress, {\n        progress: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AirdropInfoDetails, {\n        startBlock: startBlock,\n        endBlock: endBlock,\n        airdropAmount: airdropNumber,\n        vipAirdropAmount: airdropVipNumber,\n        totalAmount: totalAmount,\n        remainingTokens: remainingTokens,\n        tokenName: name.toUpperCase()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(LinkExternal, {\n            mb: \"5px\",\n            style: {\n              cursor: \"pointer\"\n            },\n            href: getChainExplorerUrl(CHAIN_ID, address),\n            children: \"View Token Contract\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(LinkExternal, {\n            mb: \"5px\",\n            style: {\n              cursor: \"pointer\"\n            },\n            href: projectSiteUrl,\n            children: \"View Project Site\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), account && /*#__PURE__*/_jsxDEV(Flex, {\n            justifyContent: \"flex-start\",\n            alignItems: \"center\",\n            mb: \"10px\",\n            style: {\n              cursor: \"pointer\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              onClick: () => registerToken(address, name, tokenDecimals),\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                color: \"primary\",\n                bold: true,\n                fontSize: \"16px\",\n                mr: \"5px\",\n                children: \"Add to Metamask\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"./images/metamask.svg\",\n              alt: \"metamask\",\n              width: \"20px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [account ? /*#__PURE__*/_jsxDEV(Button, {\n            disabled: !isVIP && !isWhitelisted,\n            onClick: claimAirdrop,\n            fullWidth: true,\n            children: \"Claim\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 39\n          }, this) : /*#__PURE__*/_jsxDEV(UnlockButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 133\n          }, this), account && !isVIP && !isWhitelisted && /*#__PURE__*/_jsxDEV(Text, {\n            color: \"failure\",\n            children: \"* System is validating your info\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 68\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), isOwner ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: approveAirdropList,\n            children: \"Approve\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: vipApproveAirdropList,\n            children: \"Approve VIP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }, this) : \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 9\n  }, this);\n};\n\n_s(InfoCard, \"RHUEf2YV8dSuFtz0uRCI1VIg7bY=\", false, function () {\n  return [useWallet, useGetAirdropInfo, useGetAirdropList, useGetAirdropList, useAirdropContract, useIsVIP, useIsWhiteListed, useModal, useModal, useModal, useModal, useModal, useModal];\n});\n\n_c3 = InfoCard;\nexport default InfoCard;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"InfoLayout\");\n$RefreshReg$(_c2, \"StyledInfoCard\");\n$RefreshReg$(_c3, \"InfoCard\");","map":{"version":3,"sources":["/Users/shuowang/ETM/Leekdao/leekdao-farm/src/views/Airdrop/AirdropCard/InfoCard.tsx"],"names":["React","styled","BigNumber","getBalanceNumber","Card","CardHeader","Heading","Flex","Button","useModal","Text","LinkExternal","Box","getChainExplorerUrl","UnlockButton","useAirdropContract","useWallet","airdropConfig","registerToken","AirdropInfoHeader","AirdropInfoDetails","AirdropProgress","ConfirmationPendingContent","AirdropApproveTransactionModal","ApproveErrorMessageModal","VipApproveErrorMessageModal","VipAirdropApproveTransactionModal","ClaimAirdropTransactionModal","airdropApproveStore","vipAirdropApproveStore","claimAirdropStore","APPROVE_AIRDROP","APPROVE_VIP_AIRDROP","CLAIM_AIRDROP","UPDATE_ERROR_MESSAGE","RESET_TO_DEFAULT_STATE","useGetAirdropInfo","useGetAirdropList","updateAirdropParticipationStatus","useIsVIP","useIsWhiteListed","CHAIN_ID","process","env","REACT_APP_CHAIN_ID","CONTRACT_OWNER","REACT_APP_LOTTERY_OWNER","InfoLayout","div","StyledInfoCard","isOwner","InfoCard","id","name","description","tokenAddress","tokenDecimals","projectSiteUrl","totalAmount","isActive","account","address","startBlock","endBlock","airdropAmount","vipAirdropAmount","remainingAmount","airdropNumber","airdropVipNumber","remainingTokens","progress","airdropList","vipAirdropList","contract","isVIP","isWhitelisted","onPresentConfirmationModal","onPresentAirdropApproveModal","onPresentAirdropApproveErrorModal","onPresentVipAirdropApproveModal","onPresentVipAirdropApproveErrorModal","onPresentClaimAirdropModal","approveAirdropList","dispatch","type","error","action","airdropApproveError","result","methods","whitelist","send","from","airdropApproveTxHash","transactionHash","vipApproveAirdropList","vipAirdropApproveError","whitelistVIP","vipAirdropApproveTxHash","claimAirdrop","getAirdrop","claimAirdropTxHash","toUpperCase","cursor"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport styled from \"styled-components\"\nimport BigNumber from \"bignumber.js\"\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport { Card, CardHeader, Heading, Flex, Button, useModal, Text, LinkExternal, Box } from 'leek-uikit'\nimport { getChainExplorerUrl } from \"utils/chainExplorer\"\nimport UnlockButton from \"components/UnlockButton\"\nimport { useAirdropContract } from \"hooks/useContract\"\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\nimport { airdropConfig } from \"config/constants\"\nimport registerToken from \"utils/wallet\"\nimport AirdropInfoHeader from \"../General/AirdropInfoHeader\"\nimport AirdropInfoDetails from \"../General/AirdropInfoDetails\"\nimport AirdropProgress from \"../General/AirdropProgress\"\nimport ConfirmationPendingContent from \"../Modal/ConfirmationPendingModal\"\nimport AirdropApproveTransactionModal from \"../Modal/AirdropApproveTransactionModal\"\nimport ApproveErrorMessageModal from \"../Modal/ApproveErrorMessageModal\"\nimport VipApproveErrorMessageModal from \"../Modal/VipApproveErrorMessageModal\"\nimport VipAirdropApproveTransactionModal from \"../Modal/VipAirdropApproveTransactionModal\"\nimport ClaimAirdropTransactionModal from \"../Modal/ClaimAirdropTransactionModal\"\nimport { airdropApproveStore, vipAirdropApproveStore, claimAirdropStore } from \"../store/store\"\nimport { APPROVE_AIRDROP, APPROVE_VIP_AIRDROP, CLAIM_AIRDROP, UPDATE_ERROR_MESSAGE, RESET_TO_DEFAULT_STATE } from \"../store/reducer\"\nimport { useGetAirdropInfo, useGetAirdropList, updateAirdropParticipationStatus, useIsVIP, useIsWhiteListed } from \"../api\"\n\nconst CHAIN_ID = process.env.REACT_APP_CHAIN_ID\nconst CONTRACT_OWNER = process.env.REACT_APP_LOTTERY_OWNER\n\nconst InfoLayout = styled.div`\n    padding:30px;\n\n    @media (max-width: 768px) {\n        padding:20px\n    }\n`\n\nconst StyledInfoCard = styled(Card) <{ isOwner: boolean }>`\n  background-repeat: no-repeat;\n  background-size: contain;\n  max-height: ${({ isOwner }) => isOwner ? '580px' : '510px'}}\n  width: 100%;\n`\n\nconst InfoCard = () => {\n    const { id, name, description, tokenAddress, tokenDecimals, projectSiteUrl, totalAmount, isActive } = airdropConfig\n    const { account } = useWallet()\n    const address = tokenAddress[CHAIN_ID]\n    const isOwner = CONTRACT_OWNER === account\n    const { startBlock, endBlock, airdropAmount, vipAirdropAmount, remainingAmount } = useGetAirdropInfo()\n    const airdropNumber = getBalanceNumber(new BigNumber(airdropAmount))\n    const airdropVipNumber = getBalanceNumber(new BigNumber(vipAirdropAmount))\n    const remainingTokens = getBalanceNumber(new BigNumber(remainingAmount))\n    const progress = isActive ? (totalAmount - remainingTokens) / totalAmount * 100 : 0\n    const airdropList = useGetAirdropList(false)\n    const vipAirdropList = useGetAirdropList(true)\n    const contract = useAirdropContract()\n    const isVIP = useIsVIP(account);\n    const isWhitelisted = useIsWhiteListed(account)\n\n    const [onPresentConfirmationModal] = useModal(<ConfirmationPendingContent onDismiss={() => { return null }} />)\n    const [onPresentAirdropApproveModal] = useModal(<AirdropApproveTransactionModal onDismiss={() => { return null }} />)\n    const [onPresentAirdropApproveErrorModal] = useModal(<ApproveErrorMessageModal onDismiss={() => { return null }} />)\n    const [onPresentVipAirdropApproveModal] = useModal(<VipAirdropApproveTransactionModal onDismiss={() => { return null }} />)\n    const [onPresentVipAirdropApproveErrorModal] = useModal(<VipApproveErrorMessageModal onDismiss={() => { return null }} />)\n    const [onPresentClaimAirdropModal] = useModal(<ClaimAirdropTransactionModal onDismiss={() => { return null }} />)\n\n    const approveAirdropList = async () => {\n        onPresentConfirmationModal();\n        airdropApproveStore.dispatch({ type: RESET_TO_DEFAULT_STATE })\n        if (airdropList.error) {\n            const action = {\n                type: UPDATE_ERROR_MESSAGE,\n                airdropApproveError: airdropList.error\n            }\n            airdropApproveStore.dispatch(action)\n            onPresentAirdropApproveErrorModal()\n        } else {\n            const result = await contract.methods.whitelist(airdropList).send({ from: account })\n            const action = {\n                type: APPROVE_AIRDROP,\n                airdropApproveTxHash: result.transactionHash\n            }\n            airdropApproveStore.dispatch(action)\n            onPresentAirdropApproveModal()\n            await updateAirdropParticipationStatus(false)\n        }\n    }\n\n    const vipApproveAirdropList = async () => {\n        onPresentConfirmationModal();\n        vipAirdropApproveStore.dispatch({ type: RESET_TO_DEFAULT_STATE })\n        if (vipAirdropList.error) {\n            const action = {\n                type: UPDATE_ERROR_MESSAGE,\n                vipAirdropApproveError: vipAirdropList.error\n            }\n            vipAirdropApproveStore.dispatch(action)\n            onPresentVipAirdropApproveErrorModal()\n        } else {\n            const result = await contract.methods.whitelistVIP(vipAirdropList).send({ from: account })\n            const action = {\n                type: APPROVE_VIP_AIRDROP,\n                vipAirdropApproveTxHash: result.transactionHash\n            }\n            vipAirdropApproveStore.dispatch(action)\n            onPresentVipAirdropApproveModal()\n            await updateAirdropParticipationStatus(true)\n        }\n    }\n\n    const claimAirdrop = async () => {\n        onPresentConfirmationModal();\n        claimAirdropStore.dispatch({ type: RESET_TO_DEFAULT_STATE })\n        if (isWhitelisted || isVIP) {\n            const result = await contract.methods.getAirdrop().send({ from: account })\n            const action = {\n                type: CLAIM_AIRDROP,\n                claimAirdropTxHash: result.transactionHash\n            }\n            claimAirdropStore.dispatch(action)\n            onPresentClaimAirdropModal()\n        }\n    }\n\n    return (\n        <StyledInfoCard isOwner={isOwner}>\n            <CardHeader>\n                <Flex alignItems=\"center\" justifyContent=\"space-between\">\n                    <Heading>AirDrop Info</Heading>\n                </Flex>\n            </CardHeader>\n\n            <InfoLayout>\n                <AirdropInfoHeader airdropId={id} name={name} description={description} />\n                <AirdropProgress progress={progress} />\n                <AirdropInfoDetails startBlock={startBlock} endBlock={endBlock} airdropAmount={airdropNumber} vipAirdropAmount={airdropVipNumber} totalAmount={totalAmount} remainingTokens={remainingTokens} tokenName={name.toUpperCase()} />\n\n                <hr />\n                <Flex alignItems=\"center\" justifyContent=\"space-between\">\n                    <div>\n                        <LinkExternal mb=\"5px\" style={{ cursor: \"pointer\" }} href={getChainExplorerUrl(CHAIN_ID, address)}>View Token Contract</LinkExternal>\n                        <LinkExternal mb=\"5px\" style={{ cursor: \"pointer\" }} href={projectSiteUrl}>View Project Site</LinkExternal>\n                        {account && (\n                            <Flex justifyContent=\"flex-start\" alignItems=\"center\" mb=\"10px\" style={{ cursor: \"pointer\" }}>\n                                <Box\n                                    onClick={() => registerToken(address, name, tokenDecimals)}\n                                >\n                                    <Text color=\"primary\" bold fontSize=\"16px\" mr=\"5px\">\n                                        Add to Metamask\n                                    </Text>\n                                </Box>\n                                <img src=\"./images/metamask.svg\" alt=\"metamask\" width=\"20px\" />\n                            </Flex>\n                        )}\n                    </div>\n\n                    <div>\n                        {\n                            account ? <Button disabled={!isVIP && !isWhitelisted} onClick={claimAirdrop} fullWidth>Claim</Button> : <UnlockButton />\n                        }\n                        {\n                            account && !isVIP && !isWhitelisted && <Text color=\"failure\">* System is validating your info</Text>\n                        }\n                    </div>\n\n                </Flex>\n\n                {\n                    isOwner ?\n                        <div>\n                            <Flex alignItems=\"center\" justifyContent=\"space-between\">\n                                <Button onClick={approveAirdropList}>Approve</Button>\n                                <Button onClick={vipApproveAirdropList}>Approve VIP</Button>\n                            </Flex>\n                        </div> : \"\"\n                }\n\n\n            </InfoLayout>\n        </StyledInfoCard>\n    )\n\n}\n\nexport default InfoCard"]},"metadata":{},"sourceType":"module"}